<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.industry.mapper.LoginLogMapper">
    <select id="listByConditionPages" resultType="LoginLogDO">
        select id,user_id, username, user_chinese_name, mechanism_name, ip, city_info, gmt_create from
        construction_industry_api.t_login_log where 1 = 1
        <if test="search.username != null and search.username != ''">
            and username like concat('%',#{search.username},'%')
        </if>
        <if test="search.mechanismName != null and search.mechanismName != ''">
            and mechanism_name like concat('%',#{search.mechanismName},'%')
        </if>
        <if test="search.userChineseName != null and search.userChineseName != ''">
            and user_chinese_name like concat('%',#{search.userChineseName},'%')
        </if>
        <if test="search.startDate != null and search.startDate != ''">
            and gmt_create &gt;= #{search.startDate}
        </if>
        <if test="search.endDate != null and search.endDate != ''">
            and gmt_create &lt;= #{search.endDate}
        </if>
        order by id desc
        limit #{page.currentPage},#{page.pageSize}
    </select>
    <select id="getCountByCondition" resultType="Long">
        select count(*)
        from construction_industry_api.t_login_log
        where 1 = 1
        <if test="search.username != null and search.username != ''">
            and username like concat('%',#{search.username},'%')
        </if>
        <if test="search.mechanismName != null and search.mechanismName != ''">
            and mechanism_name like concat('%',#{search.mechanismName},'%')
        </if>
        <if test="search.userChineseName != null and search.userChineseName != ''">
            and user_chinese_name like concat('%',#{search.userChineseName},'%')
        </if>
        <if test="search.startDate != null and search.startDate != ''">
            and gmt_create &gt;= #{search.startDate}
        </if>
        <if test="search.endDate != null and search.endDate != ''">
            and gmt_create &lt;= #{search.endDate}
        </if>
    </select>
</mapper>
